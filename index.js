"use strict";(()=>{document.addEventListener("DOMContentLoaded",()=>{let y=new Set;function s(e,r){y.has(e)||(y.add(e),console.warn(r))}function g(e,r){return r?!1:(s(e,`[GSAP NOT FOUND] ${e}`),!0)}let m=document.querySelector(".gallery"),h=document.querySelector(".gallery-container"),l=document.querySelectorAll(".card");g(".gallery",m),g(".gallery-container",h),l.length===0&&s(".card-empty","[GSAP NOT FOUND] .card (no elements found)");let S=[],u=[],d=!1,p=!1,n={radius:0,sensitivity:500,effectFalloff:250,cardMoveAmount:50,lerpFactor:.15,isMobile:window.innerWidth<1e3,imageCount:l.length},M=16,R=3,x=parseFloat(getComputedStyle(document.documentElement).fontSize),E=l[0]?.getBoundingClientRect().width||0,A=R*x;n.imageCount=M,n.radius=(E+A)*M/(2*Math.PI);let a={targetX:0,targetY:0,targetZ:0,currentX:0,currentY:0,currentZ:0};for(let e=0;e<n.imageCount;e++){let r=l[e];if(!r){s(`.card-${e}`,`[GSAP NOT FOUND] .card at index ${e}`);continue}let t=e/n.imageCount*Math.PI*2,c=n.radius*Math.cos(t),i=n.radius*Math.sin(t);r.dataset.index=e,gsap.set(r,{x:c,y:i,rotation:t*180/Math.PI+90,transformPerspective:800,transformOrigin:"center center"}),S.push(r),u.push({angle:t,currentRotation:0,targetRotation:0,currentX:0,targetX:0,currentY:0,targetY:0,currentScale:1,targetScale:1})}function w(){let e=window.innerWidth;n.isMobile=e<1e3;let r=1;e<768?r=.6:e<1200&&(r=.8),g(".gallery",m)||gsap.set(m,{scale:r}),d||(Object.assign(a,{targetX:0,targetY:0,targetZ:0,currentX:0,currentY:0,currentZ:0}),u.forEach(t=>{t.currentRotation=0,t.targetRotation=0,t.currentScale=1,t.targetScale=1,t.currentX=0,t.targetX=0,t.currentY=0,t.targetY=0}))}window.addEventListener("resize",w),w(),document.addEventListener("mousemove",e=>{if(d||p||n.isMobile)return;let r=window.innerWidth/2,t=window.innerHeight/2,c=(e.clientX-r)/r,i=(e.clientY-t)/t;a.targetY=c*15,a.targetX=-i*15,a.targetZ=(c+i)*5,S.forEach((F,Y)=>{let o=u[Y];if(!F||!o){s(`mousemove-${Y}`,`[GSAP SKIPPED] mousemove index ${Y}`);return}let f=F.getBoundingClientRect(),C=e.clientX-(f.left+f.width/2),Z=e.clientY-(f.top+f.height/2),v=Math.hypot(C,Z);if(v<n.sensitivity){let X=Math.max(0,1-v/n.effectFalloff),O=n.cardMoveAmount*X;o.targetRotation=180*X,o.targetScale=1+.3*X,o.targetX=O*Math.cos(o.angle),o.targetY=O*Math.sin(o.angle)}else o.targetRotation=0,o.targetScale=1,o.targetX=0,o.targetY=0})}),document.addEventListener("mouseout",e=>{!e.relatedTarget&&!d&&!p&&(u.forEach(r=>{r.targetRotation=0,r.targetScale=1,r.targetX=0,r.targetY=0}),a.targetX=0,a.targetY=0,a.targetZ=0)});function P(){!d&&!p&&(a.currentX+=(a.targetX-a.currentX)*n.lerpFactor,a.currentY+=(a.targetY-a.currentY)*n.lerpFactor,a.currentZ+=(a.targetZ-a.currentZ)*n.lerpFactor,g(".gallery-container",h)||gsap.set(h,{rotateX:a.currentX,rotateY:a.currentY,rotation:a.currentZ,transformOrigin:"center center"}),S.forEach((e,r)=>{let t=u[r];if(!e||!t){s(`animate-${r}`,`[GSAP SKIPPED] animate index ${r}`);return}t.currentRotation+=(t.targetRotation-t.currentRotation)*n.lerpFactor,t.currentScale+=(t.targetScale-t.currentScale)*n.lerpFactor,t.currentX+=(t.targetX-t.currentX)*n.lerpFactor,t.currentY+=(t.targetY-t.currentY)*n.lerpFactor;let c=n.radius*Math.cos(t.angle),i=n.radius*Math.sin(t.angle);gsap.set(e,{x:c+t.currentX,y:i+t.currentY,rotationY:t.currentRotation,scale:t.currentScale,rotation:t.angle*180/Math.PI+90,transformPerspective:1e3,transformOrigin:"center center"})})),requestAnimationFrame(P)}P()});})();
